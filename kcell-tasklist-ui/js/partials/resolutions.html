<div class="modal-header">
    <button type="button" class="close" ng-click="$dismiss()" aria-hidden="true">&times;</button>
    <h4 class="modal-title">History</h4>
</div>
<div class="modal-body">
    <div class="row">
    	<div class="col-md-12">
    		<div class="row">
	            <table class="table">
	                <thead>
	                <tr>
	                    <th>Activity</th>
	                    <th>Assignee</th>
											<th ng-if="procDef === 'AftersalesPBX'">Assignee date</th>
											<th ng-if="procDef === 'AftersalesPBX'">Claim date</th>
											<th ng-if="procDef === 'AftersalesPBX'">Approval date</th>
	                    <th>Resolution</th>
	                    <th ng-if="procDef !== 'AftersalesPBX'">Date</th>
	                    <th>Comment</th>
	                    <th>Attached files</th>
	                </tr>
	                </thead>
	                <tbody>
	                <tr ng-repeat="resolution in resolutions">
	                    <td>{{resolution.taskName}}</td>
	                    <td>{{resolution.assigneeName || resolution.assignee}}</td>
											<td ng-if="procDef === 'AftersalesPBX'">{{resolution.assignDate | date: 'dd.MM.yyyy HH:mm'}}</td>
											<td ng-if="procDef === 'AftersalesPBX'">{{resolution.claimDate | date: 'dd.MM.yyyy HH:mm'}}</td>
											<td ng-if="procDef === 'AftersalesPBX'">{{resolution.taskEndDate | date: 'dd.MM.yyyy HH:mm'}}</td>
											<td ng-if="procDef === 'AftersalesPBX'">{{resolution.resolution}}</td>
	                    <td ng-if="procDef !== 'AftersalesPBX'">{{'task.resolution.'+resolution.resolution | translate}}</td>
	                    <td ng-if="procDef !== 'AftersalesPBX'">{{resolution.taskEndDate | date: 'dd.MM.yyyy HH:mm'}}</td>
	                    <td>{{(!resolution.visibility || resolution.visibility === 'all' || (resolution.visibility === 'kcell' && isKcellStaff))? resolution.comment : ''}}</td>
	                    <td ng-if="procDef !== 'AftersalesPBX'">{{resolution.files.join(', ')}}</td>
											<td ng-if="procDef === 'AftersalesPBX'">
												<p ng-repeat="file in resolution.attachments.added">{{file}}</p>
												<p ng-repeat="file in resolution.attachments.removed" class="text-danger">{{file}}</p>
											</td>
	                </tr>
	                </tbody>
	            </table>
    		</div>
    	</div>
    </div>
</div>
<div class="modal-footer" id="modal-footer">
	<button type="button" class="btn btn-default" ng-click="$dismiss()">Close</button>
</div>