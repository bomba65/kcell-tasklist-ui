<div class="col-sm-12">
    <table class="table">
        <thead>
            <tr valign="middle" align="middle">
                <th>Department</th>
                <th>Material type</th>
                <th>Description</th>
                <th>Purchase group</th>
                <th>Quantity</th>
                <th>Measure</th>
                <th>Existing on Wirehouse?</th>
                <th>Currency</th>
                <th>Price</th>
                <th>Summ</th>
                <th ng-if="!readonly">
                    <a href="#" ng-click="addItem()" style="font-size: 25px;">
                        <span class="glyphicon glyphicon-plus-sign"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="r in data track by $index" align="middle">
                <td>
                    <span ng-if="readonly">{{r.department}}</span>
                    <span ng-if="!readonly">
                        <select class="form-control" ng-model="r.department" ng-disabled="readonly">
                            <option value="TD">TD</option>
                            <option value="CCD">CCD</option>
                            <option value="CPD">CPD</option>
                            <option value="FD">FD</option>
                        </select>
                        <span class="has-error" ng-if="(!r.department || r.department.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.materialType}}</span>
                    <span ng-if="!readonly">
                        <select class="form-control" ng-model="r.materialType" ng-disabled="readonly">
                            <option value="Server">Server</option>
                            <option value="Platform">Platform</option>
                            <option value="License and Software">License and Software</option>
                            <option value="Equipment (parts)">Equipment (parts)</option>
                            <option value="New Equipment">New Equipment</option>
                        </select>
                        <span class="has-error" ng-if="(!r.materialType || r.materialType.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.description}}</span>
                    <span ng-if="!readonly">
                        <input type="text" class="form-control" ng-model="r.description" ng-disabled="readonly || r.materialType != 'New Equipment'">
                        <span class="has-error" ng-if="r.materialType == 'New Equipment' && (!r.description || r.description.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.purchaseGroup}}</span>
                    <span ng-if="!readonly">
                        <select class="form-control" ng-model="r.purchaseGroup" ng-disabled="readonly">
                            <option value="123">123</option>
                            <option value="456">456</option>
                        </select>
                        <span class="has-error" ng-if="(!r.purchaseGroup || r.purchaseGroup.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.quantity}}</span>
                    <span ng-if="!readonly">
                        <input type="number" class="form-control" ng-model="r.quantity" ng-change="calcSumm($index)" ng-disabled="readonly">
                        <span class="has-error" ng-if="r.quantity == null && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.measure}}</span>
                    <span ng-if="!readonly">
                        <select class="form-control" ng-model="r.measure" ng-disabled="readonly">
                            <option value="Pcs">Pcs</option>
                            <option value="Bundle">Bundle</option>
                            <option value="Kit">Kit</option>
                        </select>
                        <span class="has-error" ng-if="(!r.measure || r.measure.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <input type="checkbox" ng-model="r.existing" ng-disabled="readonly">
                </td>
                <td>
                    <span ng-if="readonly">{{r.currency}}</span>
                    <span ng-if="!readonly">
                        <select class="form-control" ng-model="r.currency" ng-disabled="readonly">
                            <option value="KZT">KZT</option>
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="RUB">RUR</option>
                        </select>
                        <span class="has-error" ng-if="(!r.currency || r.currency.length == 0) && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.pprice}}</span>
                    <span ng-if="!readonly">
                        <input type="number" class="form-control" ng-model="r.pprice" ng-change="calcSumm($index)" ng-disabled="readonly">
                        <span class="has-error" ng-if="r.pprice == null && view.submitted">Required field</span>
                    </span>
                </td>
                <td>
                    <span ng-if="readonly">{{r.summ}}</span>
                    <span ng-if="!readonly">
                        <input type="number" class="form-control" ng-model="r.summ" ng-disabled="readonly">
                        <span class="has-error" ng-if="r.summ == null && view.submitted">Required field</span>
                    </span>
                </td>
                <td ng-if="!readonly">
                    <button type="button" class="btn btn-default" ng-click="deleteItem($index)" ng-disabled="readonly">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="col-sm-12" ng-if="data.length > 0">
        <div class="col-sm-5 pull-right form-group">
            <label class="col-sm-5 control-label">Total Summ</label>
            <div class="col-sm-7">
                <input type="text" class="form-control" ng-model="totalSumm" disabled>
            </div>
        </div>
    </div>
</div>