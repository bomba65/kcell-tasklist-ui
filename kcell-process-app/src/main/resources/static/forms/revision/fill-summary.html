<h4>Summary of JR</h4>
<job-request job-model="jobModel"></job-request>
<ng-include ng-if="contextPath" src="contextPath+'/forms/revision/summaries.html'"></ng-include>
<h3>Works:</h3>
<div class="row" ng-repeat="work in sitesWorks">
    <div class="col-md-12">&nbsp;&nbsp;&nbsp;&nbsp;{{jobModel.worksTitle[work.sapServiceNumber]}}, works qty: {{work.quantity}}, materials qty: {{work.materialQuantity}} {{jobModel.unitsTitle[work.unit]}}, on sites: <ul class="site-list"><li ng-repeat="rs in work.relatedSites">{{rs.site_name}}</li></ul></div>
    <div class="col-md-12" ng-repeat="file in work.files track by $index">
        <div class="col-md-12" ng-if="file.valueInfo">&nbsp;&nbsp;&nbsp;&nbsp;{{$index+1}}.
            <a ng-click="downloadOldFile(file)">{{file.valueInfo.filename}} (Old file, read only)</a>
        </div>
        <div class="col-md-12" ng-show="file.value.name">
            &nbsp;&nbsp;&nbsp;&nbsp;{{$index + 1}}.
            <a ng-click="download(file)">{{file.value.name}}</a> | <a ng-click="clearFile($parent.$index,$index)"><i
                class="glyphicon glyphicon-trash"></i>
            </a>
        </div>
    </div>
    <!--<input type="file" class="form-control" id="works_{{$index}}_file_{{work.files.length}}" name="works_{{$parent.$index}}_file_{{$index}}" ng-model="file.file" onchange="angular.element(this).scope().siteWorkfileSelected(this, angular.element(this).scope().$index)"/>-->
    <div class="input-group">
        <label class="input-group-btn">
                    <span class="btn btn-default">
                        Choose File <input type="file" id="works_{{$index}}_file_{{work.files.length}}" name="works_{{$parent.$index}}_file_{{$index}}" ng-model="file.file"  style="display: none;" onchange="angular.element(this).scope().siteWorkfileSelected(this, angular.element(this).scope().$index, '#supplementaryFilesName');$('#supplementaryFilesName').val(this.files[0].name)" >
                    </span>
        </label>
        <input type="text" class="form-control upload-filename" id="supplementaryFilesName" placeholder="No File Chosen" readonly>
    </div>
</div>
<br/>
<div class="row">
    <div class="col-md-4"><h4>Upload TSSR/SSID if available:</h4></div>
    <div class="col-md-8">
        <div ng-show="jobModel.tssrssidFile.contentUrl">
            <a href="{{jobModel.tssrssidFile.contentUrl}}">TSSR/SSID (Old version, read only)</a>
        </div>
        <div ng-show="tssrssidFileName.value.name">
            <a ng-click="download(tssrssidFileName)">{{tssrssidFileName.value.name}}</a> | <a ng-click="clearTSSRFile('tssrssidFileName')"><i
                class="glyphicon glyphicon-trash"></i>
            </a>
        </div>
        <!--<input ng-hide="tssrssidFileName.value.name" type="file" ng-model="tssrssidFileName" id="tssrssidFileName" name="tssrssidFileName" accept="*" onchange="angular.element(this).scope().fileSelected(this, 'tssrssidFileName')"/>-->
        <div class="input-group" ng-hide="tssrssidFileName.value.name">
            <label class="input-group-btn">
                    <span class="btn btn-default">
                        Choose File <input type="file" id="tssrssidFileName" name="tssrssidFileName" accept="*"  ng-model="tssrssidFileName"  style="display: none;" onchange="angular.element(this).scope().fileSelected(this, 'tssrssidFileName', '#supplementaryFilesName');$('#supplementaryFilesName').val(this.files[0].name)" >
                    </span>
            </label>
            <input type="text" class="form-control upload-filename" id="supplementaryFilesName" placeholder="No File Chosen" readonly>
        </div>
    </div>
</div>
