<form role="form" class="form-horizontal" name="kcell_form" novalidate>
    <script cam-script type="text/form-script">
    inject(['$scope', '$q', '$http', '$rootScope', function ($scope, $q, $http, $rootScope) {
        $scope.generalData = {};
        camForm.on('form-loaded', function() {
            camForm.variableManager.fetchVariable('generalData');
        });
        camForm.on('variables-fetched', function() {
            $scope.generalData = camForm.variableManager.variableValue('generalData');
            if (!$scope.generalData) $scope.generalData = {};
        });
        camForm.on('submit', function() {
            camForm.variableManager.destroyVariable('generalData');
            camForm.variableManager.createVariable({
                name: 'generalData',
                type: 'Json',
                value: $scope.generalData
            });
        });
    }]);
    </script>
    <h3><b>Demand & AOP</b></h3>
    <h4>Проверка работоспособности директива</h4>
    <div class="col-sm-12">
        <demand-general data="generalData" form="kcell_form" view="view"></demand-general>
    </div>
</form>